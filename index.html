<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Venta de Cervezas - GIOS</title>

<style>

#splash {
  position: fixed;
  inset: 0;
  background: #f2f2f2;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  transition: opacity 0.6s ease;
}

#splash.fade-out {
  opacity: 0;
  pointer-events: none;
}

.currency{
  margin-right:4px;
  font-weight:bold;
}

#total{
  display:inline-block;
  transition: transform .2s ease;
    }
    #total.bump{
      transform: scale(1.25);
    }

#zoneInfo{
  display:block;
  margin-top:6px;
  font-size:13px;
  font-weight:600;   /* m√°s suave que bold */
  color:#333;
  text-align:center;
}

body{
  margin:0;
  font-family:Arial, sans-serif;
  background:url("fondo-app.jpg") no-repeat center center;
  background-size:cover;
  min-height:100vh;
  overflow-x:hidden;
}

.app{
  max-width:420px;
  margin:auto;
  background:rgba(255,255,255,0.9);
  min-height:100vh;
  padding-bottom:220px; /* üëà m√°s espacio real para el footer */
  box-sizing:border-box;
}

/* HEADER */
.app-header{
  position:sticky;
  top:0;
  background:#EDEAE8;
  text-align:center;
  padding:10px;
  z-index:10;
}

.logo{max-width:80px;}
.subtitulo{font-size:14px;font-weight:bold;}
.info{font-size:12px;}

/* PRODUCTS */
.products{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px;
  padding:10px;
}

.card{
  background:#EDEFF0;
  border-radius:14px;
  padding:6px;
  text-align:center;
  box-shadow:0 6px 16px rgba(0,0,0,.08);
  transition:transform .18s ease, box-shadow .18s ease;
}

.beer-box{
  border:1px solid #ccc;
  border-radius:10px;
  padding:6px;
}

.beer-img{
  width:68px;
  height:90px;
  object-fit:contain;
}

.qty{
  display:flex;
  justify-content:center;
  gap:10px;
}

.qty button{
  width:24px;
  height:24px;
  font-size:16px;
  font-weight:bold;
}

.beer-info h3{
  font-size:14px;
  margin:4px 0 2px;
}

.price{font-weight:bold;}

/* FOOTER */
.footer{
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  max-width: 420px;
  background: #fff;
  padding: 10px;
  z-index: 20; /* üëà asegura que quede arriba */
}

/* DELIVERY */
.delivery-title{
  background:#007BFF;
  color:#fff;
  font-weight:bold;
  text-align:center;   /* üëà ESTO centra el texto */
  padding:8px;
  border-radius:8px;
  margin-bottom:6px;
}

.delivery-zone select{
  width:100%;
  padding:6px;
  border-radius:8px;
  margin-bottom:6px;
}

/* TOTAL */
.total{
  text-align:center;
  font-size:18px;
  font-weight:bold;
  margin:6px 0;
  transition:transform .2s ease;
}

.total.bump{
  transform:scale(1.15);
}

/* ACTIONS */
.actions{
  display:flex;
  gap:6px;
}

.actions button{
  flex:1;
  padding:8px;
  border:none;
  border-radius:6px;
  font-size:11px;
}

.actions button:disabled{opacity:.5}

.qty button{
  transition: transform .1s ease;
}

.qty button:active{
  transform: translateY(2px);
}

.card{
  transition: transform .12s ease, box-shadow .12s ease;
}

.card:active{
  transform: translateY(4px);
  box-shadow: 0 4px 8px rgba(0,0,0,.18);
}

/* ===== INFO DELIVERY ===== */
#zoneInfo{
  display:block;
  font-size:13px;
  margin-top:6px;          /* m√°s aire */
  font-weight:600;         /* semi-bold */
  color:#333;
  text-align:center;
}

.transfer-highlight{
  margin-top:14px;
  padding:10px;
  border:1.5px solid #007BFF;     /* azul el√©ctrico */
  border-radius:8px;
  background:#fff;
  color:#c70000;                  /* rojo */
  font-weight:bold;
  text-align:center;
  font-size:13px;
}

#zone{
  width:100%;
  padding:8px;
  border-radius:8px;
  text-align:center;
  text-align-last:center;

  background:#007BFF;      /* azul el√©ctrico */
  color:#fff;              /* texto blanco */
  font-weight:bold;

  border:none;
  appearance:none;
}

#splash img{
  width:90%;
  max-width:360px;
  opacity:0;
  animation:logoIn 0.8s ease forwards;
}

/* Animaciones */
@keyframes logoIn{
  to{opacity:1; transform:scale(1);}
}

@keyframes fadeOut{
  to{opacity:0; visibility:hidden;}
}

/* ===== WELCOME ===== */
#welcome{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  z-index:90;
  align-items:center;
  justify-content:center;
}

.welcome-box{
  background:#fff;
  border-radius:16px;
  padding:20px;
  width:90%;
  max-width:340px;
  text-align:center;
}

.welcome-box h2{
  margin:0 0 8px;
}

.welcome-box p{
  font-size:14px;
  margin-bottom:12px;
}

.welcome-box input{
  width:100%;
  padding:8px;
  margin-bottom:10px;
  border-radius:8px;
  border:1px solid #ccc;
}

.welcome-actions{
  display:flex;
  gap:10px;
}

.welcome-actions button{
  flex:1;
  padding:8px;
  border-radius:8px;
  font-weight:bold;
}

.welcome-actions button:last-child{
  background:#007BFF;
  color:#fff;
  border:none;
}

</style>
</head>

<!-- MODAL TRANSFERENCIA -->
<div id="transferModal" style="display:none; position:fixed; inset:0;
background:rgba(0,0,0,.55); z-index:50;
align-items:center; justify-content:center">

  <div style="
    background:#f2f2f2;
    border:2px solid #555;
    border-radius:14px;
    padding:18px;
    width:90%;
    max-width:320px;
    text-align:left;
  ">

    <div style="font-weight:bold;color:#000;margin-bottom:10px;">
      üè¶ Datos para Transferencia üè¶
    </div>

    <div style="color:#000;font-weight:bold;line-height:1.6;">
      Banco : Coopeuch<br>
      Cuenta : Vista<br>
      N¬∫ Cuenta: 251105735<br>
      Nombre : Oscar Torres
    </div>

    <div class="transfer-highlight">
      *** Env√≠a Comprobante V√≠a WhatsApp ***
    </div>

    <div style="text-align:center;margin-top:14px;">
      <button onclick="closeTransfer()" style="
        background:#007BFF;
        color:#fff;
        font-weight:bold;
        border:1px solid #000;
        padding:8px 22px;
        border-radius:8px;
      ">Cerrar</button>
    </div>

  </div>
</div>

<!-- ALERTA MERCADO PAGO -->
<div id="mpAlert" style="display:none; position:fixed; inset:0;
background:rgba(0,0,0,.55); z-index:60;
align-items:center; justify-content:center">

  <div style="
    background:#f2f2f2;
    border:2px solid #007BFF;
    border-radius:14px;
    padding:18px;
    width:90%;
    max-width:320px;
    text-align:center;
  ">

    <div style="font-weight:bold;color:#000;margin-bottom:10px;">
      üí≥ Mercado Pago
    </div>

    <div class="transfer-highlight">
      *** Env√≠a Comprobante V√≠a WhatsApp ***
    </div>

    <div style="display:flex; gap:10px; margin-top:16px; justify-content:center;">
      <button onclick="goMP()" style="
        background:#007BFF;
        color:#fff;
        font-weight:bold;
        border:none;
        padding:8px 14px;
        border-radius:8px;
      ">Continuar</button>

      <button onclick="closeMP()" style="
        background:#fff;
        color:#000;
        font-weight:bold;
        border:1px solid #000;
        padding:8px 14px;
        border-radius:8px;
      ">Cancelar</button>
    </div>

  </div>
</div>

<body>

<!-- SPLASH -->
<div id="splash">
  <img src="logogios.png" alt="GIOS">
</div>

<!-- MODAL TRANSFERENCIA -->
<div id="transferModal" style="display:none; ...">
  ...
</div>

<!-- ALERTA MERCADO PAGO -->
<div id="mpAlert" style="display:none; ...">
  ...
</div>

<div class="app">
  ...
</div>

<script>
  window.addEventListener("load",()=>{
  setTimeout(()=>{
    const splash = document.getElementById("splash");
    splash.classList.add("fade-out");

    setTimeout(()=>{
      splash.remove();
      window.scrollTo(0,0); // üëà CLAVE
    },600);
  },900);
});
</script>

<div class="app">

<header class="app-header">
  <img src="logogios.png" class="logo">
  <div class="subtitulo">üç∫ Venta de Cervezas - Copiap√≥ üç∫</div>
  <div class="info">‚è∞ 09:00‚Äì15:00 / 17:00‚Äì22:00 üöö Delivery</div>
</header>

<div class="products">

<div class="card" data-price="1000">
  <div class="beer-box">
    <img src="escudo-silver.png" class="beer-img">
    <div class="qty">
      <button onclick="add(this,-1)">‚àí</button>
      <span>0</span>
      <button onclick="add(this,1)">+</button>
    </div>
  </div>
  <div class="beer-info">
    <h3>Escudo Silver</h3>
    <div class="price">$1.000</div>
  </div>
</div>

<div class="card" data-price="950">
  <div class="beer-box">
    <img src="escudo-roja470.avif" class="beer-img">
    <div class="qty">
      <button onclick="add(this,-1)">‚àí</button>
      <span>0</span>
      <button onclick="add(this,1)">+</button>
    </div>
  </div>
  <div class="beer-info">
    <h3>Escudo Roja</h3>
    <div class="price">$950</div>
  </div>
</div>

<div class="card" data-price="900">
 <div class="beer-box">
  <img src="cristal-473.png" class="beer-img">
  <div class="qty">
   <button onclick="add(this,-1)">‚àí</button>
   <span>0</span>
   <button onclick="add(this,1)">+</button>
  </div>
</div>
<div class="beer-info">
 <h3>Cristal</h3>
 <small>473cc</small>
 <div class="price">$900</div>
 </div>
</div>

<div class="card" data-price="1000">
 <div class="beer-box">
  <img src="sol-330.png" class="beer-img">
  <div class="qty">
   <button onclick="add(this,-1)">‚àí</button>
   <span>0</span>
   <button onclick="add(this,1)">+</button>
 </div>
</div> 
<div class="beer-info">
 <h3>Sol</h3>
 <small>330cc</small>
 <div class="price">$1.000</div>
 </div>
</div>

</div>
</div>

<div class="footer">

  <div class="delivery-zone">

  <select id="zone" onchange="calc()">
      <option value="" style="text-align:center;">
  üöö Selecciona Zona Delivery üöö</option>
      <option value="centro">Copiap√≥ Centro</option>
      <option value="paipote">Paipote</option>
      <option value="tierra">Tierra Amarilla</option>
    </select>

    <small id="zoneInfo"></small>

  </div>

  <div class="total">
    Total: <span class="currency">$</span><span id="total">0</span>
  </div>

  <div class="actions">
  <button id="mp" onclick="pagarMP()" disabled>üí≥ Mercado Pago</button>
  <button id="tr" onclick="openTransfer()" disabled>üè¶ Transferir</button>
  <button id="wa" onclick="sendWA()" disabled>üì≤ WhatsApp</button>
  <button id="call" onclick="location.href='tel:+56927731874'">üìû Llamar</button>
</div>

</div>

<script>
const zonas={
  centro:{costo:1000,minimo:5000},
  paipote:{costo:2000,minimo:8000},
  tierra:{costo:3000,minimo:10000}
};

let total=0;

function add(btn,val){
  const card=btn.closest(".card");
  const span=btn.parentNode.querySelector("span");
  span.innerText=Math.max(0,parseInt(span.innerText)+val);

  card.classList.remove("bump");
  void card.offsetWidth;
  card.classList.add("bump");

  calc();
}

function calc(){
  let subtotal=0;

  document.querySelectorAll(".card").forEach(c=>{
    subtotal+=c.dataset.price*parseInt(c.querySelector("span").innerText);
  });

  let zone=document.getElementById("zone").value;
  let delivery=0;
  let ok=subtotal>0;

  if(zone){
    delivery=zonas[zone].costo;
    document.getElementById("zoneInfo").innerText =
  `Delivery $${delivery.toLocaleString("es-CL")} | M√≠n $${zonas[zone].minimo.toLocaleString("es-CL")}`;
    if(subtotal<zonas[zone].minimo) ok=false;
  }else{
    ok=false;
    document.getElementById("zoneInfo").innerText="";
  }

  total=subtotal+(ok?delivery:0);
  const totalSpan = document.getElementById("total");
totalSpan.innerText = total.toLocaleString("es-CL");

totalSpan.classList.remove("bump");
void totalSpan.offsetWidth;
totalSpan.classList.add("bump");

  const t=document.querySelector(".total");
  t.classList.remove("bump");
  void t.offsetWidth;
  t.classList.add("bump");

  ["mp","tr","wa"].forEach(id=>{
    document.getElementById(id).disabled=!(total>0 && ok);
  });
}

function pagarMP(){
  document.getElementById("mpAlert").style.display="flex";
}

function closeMP(){
  document.getElementById("mpAlert").style.display="none";
}

function goMP(){
  closeMP();
  window.open("https://link.mercadopago.cl/torresice","_blank");
}

msg+=`Cliente: ${cliente.nombre}\n`;
msg+=`Direcci√≥n: ${cliente.direccion}\n\n`;

function sendWA(){
  let msg="üç∫ Pedido GIOS üç∫\n";
  document.querySelectorAll(".card").forEach(c=>{
    let q=c.querySelector("span").innerText;
    if(q>0) msg+=`${c.querySelector("h3").innerText} x${q}\n`;
  });
  msg+=`Total: $${total}`;
  window.open("https://wa.me/56927731874?text="+encodeURIComponent(msg));
}

function openTransfer(){
  document.getElementById("transferModal").style.display="flex";
}

function closeTransfer(){
  document.getElementById("transferModal").style.display="none";
}

  window.addEventListener("load",()=>{
  setTimeout(()=>{
    document.getElementById("splash")?.classList.add("fade-out");
  },1200);

  setTimeout(()=>{
    document.getElementById("splash")?.remove();
  },1800);
});

let cliente={};

function continueWelcome(){
  const nombre=document.getElementById("clienteNombre").value.trim();
  const direccion=document.getElementById("clienteDireccion").value.trim();

  if(!nombre || !direccion){
    alert("Por favor completa tus datos");
    return;
  }

  cliente.nombre=nombre;
  cliente.direccion=direccion;

  document.getElementById("welcome").style.display="none";
}

function cancelWelcome(){
  location.reload();
}

</script>

</body>

</html>
